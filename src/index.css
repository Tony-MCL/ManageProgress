/* ==== [BLOCK: Reset + Base] BEGIN ==== */
* { box-sizing: border-box; }
html, body, #root { height: 100%; margin: 0; }
:root {
  --bg: #0f1115;
  --panel: #151923;
  --panel-2: #1b2030;
  --text: #e7e7ea;
  --muted: #a9afc3;
  --accent: #7a4b2e; /* "kaffe" */
  --accent-2: #9b5f3a;
  --ok: #1a7f37;
  --warn: #c17d00;
  --danger: #cc3333;
  --grid-border: #2a3145;
  --grid-hover: #242b3d;
  --grid-select: #2f3751;
}
body {
  background: linear-gradient(180deg, #0b0d12, #0f1115 35%, #0f1115);
  color: var(--text);
  font: 14px/1.35 ui-sans-serif, system-ui, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Noto Color Emoji;
}
/* ==== [BLOCK: Reset + Base] END ==== */

/* ==== [BLOCK: Header] BEGIN ==== */
.app-header {
  padding: 14px 18px;
  background: linear-gradient(180deg, var(--accent), var(--accent-2));
  color: white;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.app-header .brand { letter-spacing: 0.3px; }
.app-header .sub { font-weight: 500; opacity: 0.9; }
/* ==== [BLOCK: Header] END ==== */

/* ==== [BLOCK: Toolbar] BEGIN ==== */
.toolbar {
  display: flex;
  gap: 8px;
  padding: 10px 12px;
  background: var(--panel);
  border-bottom: 1px solid var(--grid-border);
}
.toolbtn {
  background: var(--panel-2);
  border: 1px solid var(--grid-border);
  border-radius: 8px;
  padding: 8px 12px;
  color: var(--text);
  cursor: pointer;
}
.toolbtn:hover { background: var(--grid-hover); }
.toolbtn:active { transform: translateY(1px); }
.toolbtn.danger { border-color: #4a1f20; color: #ffdede; }
.toolbtn.ok { border-color: #1c3b28; }
/* ==== [BLOCK: Toolbar] END ==== */

/* ==== [BLOCK: Table] BEGIN ==== */
.table-wrap { padding: 14px; }

.table-scroller {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.grid {
  width: max-content;
  table-layout: fixed;
  border-collapse: separate;
  border-spacing: 0;
  background: var(--panel);
  border: 1px solid var(--grid-border);
  border-radius: 10px;
  overflow: hidden;
}

.grid thead th {
  position: sticky;
  top: 0;
  background: #161b28;
  color: var(--muted);
  text-align: left;
  font-weight: 600;
  padding: 10px 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.10);
  border-right: 1px solid rgba(255, 255, 255, 0.08);
}
.grid thead th:last-child { border-right: none; }

.grid tbody td {
  padding: 0;
  border-bottom: 1px solid var(--grid-border);
  border-right: 1px solid rgba(255, 255, 255, 0.08);
}
.grid tbody td:last-child { border-right: none; }

.grid .cell {
  padding: 8px 10px;
  min-height: 34px;
  outline: none;
  cursor: default;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  user-select: none;
}

.grid .cell:hover:not(.selected) { background: var(--grid-hover); }
.grid .cell.selected,
.grid .cell.selected:hover { background: var(--grid-select); }
.grid .cell.readonly { color: var(--muted); }

/* Inputs inside cells */
.grid .cell input,
.grid .cell select {
  width: 100%;
  background: transparent;
  border: none;
  color: inherit;
  font: inherit;
  padding: 8px 10px;
  outline: none;
  user-select: text;
}

/* fargedott (om/naar vi bruker den igjen) */
.grid .color-dot {
  display: inline-block;
  width: 10px; height: 10px;
  border-radius: 50%;
  margin-right: 8px;
  vertical-align: middle;
  border: 1px solid #0006;
}

/* # -kolonnen: fast bredde + sentrert */
.grid thead th:first-child,
.grid tbody td:first-child { width: 48px; }
.grid thead th:first-child { text-align: center; }
.grid td:first-child .cell { text-align: center; padding: 8px 6px; }

/* Drag hints */
.grid thead th { cursor: default; }
.grid thead th.draggable { cursor: move; }
.grid td:first-child .cell { cursor: move; }
.tr-drop-above td { box-shadow: 0 -1px 0 0 rgba(255,255,255,0.18) inset; }
.tr-drop-below td { box-shadow: 0  1px 0 0 rgba(255,255,255,0.18) inset; }
.th-drop-left  { box-shadow: -1px 0 0 0 rgba(255,255,255,0.18) inset; }
.th-drop-right { box-shadow:  1px 0 0 0 rgba(255,255,255,0.18) inset; }

/* Disable text selection while dragging */
.grid thead th,
.grid td:first-child .cell {
  user-select: none;
}

/* Resizer på høyrekant */
.grid thead th .col-resizer {
  position: absolute;
  top: 0;
  right: -3px;
  bottom: 0;
  width: 6px;
  cursor: col-resize;
  z-index: 2;
  background: transparent;
}
/* ==== [BLOCK: Table] END ==== */

/* ==== [BLOCK: Help Panel] (uendret) ==== */
.help-panel{position:fixed;top:0;right:-420px;width:400px;height:100vh;background:#1b2232;border-left:1px solid #2b3245;box-shadow:-3px 0 15px rgba(0,0,0,0.4);color:#eee;z-index:999;transition:right .3s ease;display:flex;flex-direction:column;}
.help-panel.open{right:0;}
.help-header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#222a3d;border-bottom:1px solid #2b3245;}
.help-header h2{margin:0;font-size:1.1rem;color:#fff;}
.close-btn{background:transparent;color:#aaa;border:none;font-size:1.4rem;cursor:pointer;}
.close-btn:hover{color:#fff;}
.help-body{flex:1;overflow-y:auto;padding:16px;font-family:monospace;font-size:.85rem;white-space:pre-wrap;}
.help-body pre{margin:0;}
.help-body h1,.help-body h2,.help-body h3{margin-top:16px;margin-bottom:8px;font-weight:600;color:#fff;}
.help-body h1{font-size:1.2rem;border-bottom:1px solid #333;padding-bottom:4px;}
.help-body h2{font-size:1rem;color:#ddd;}
.help-body h3{font-size:.95rem;color:#ccc;}
.help-body ul{margin:4px 0 10px 18px;padding:0;list-style:disc;}
.help-body li{margin-bottom:4px;}
.help-body table{width:100%;border-collapse:collapse;margin:8px 0 16px 0;font-size:.85rem;}
.help-body th,.help-body td{border:1px solid #2e3648;padding:6px 8px;text-align:left;}
.help-body th{background:#242b3b;color:#eee;font-weight:600;}
.help-body td{background:#1d2333;color:#ccc;}

/* ==== [BLOCK: Print styles] BEGIN ==== */
@media print {
  .app-header, .toolbar, .footer, .table-wrap > div:not(.grid) { display: none !important; }
  body { background: white; color: black; }
  .table-wrap { padding: 0; }

  .grid { width: max-content; table-layout: fixed; border-collapse: separate; border-spacing: 0; border: 1px solid #000; }
  .grid thead th { background: #f2f2f2 !important; color: #000 !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
  .grid tbody td { border-bottom: 1px solid #ddd; }
  .grid .cell { background: transparent !important; color: #000; }
  .grid .cell.selected { background: transparent !important; }
  .grid thead th { position: static; }
}
/* ==== [BLOCK: Print styles] END ==== */

/* ==== [BLOCK: Dragging indicator global] ==== */
body.dragging, body.dragging * { cursor: grabbing !important; }
.grid thead th.draggable, .grid td:first-child .cell { cursor: grab; }
.grid thead th.draggable:active, .grid td:first-child .cell:active { cursor: grabbing; }
body.dragging .grid .cell:hover { background: none !important; }
